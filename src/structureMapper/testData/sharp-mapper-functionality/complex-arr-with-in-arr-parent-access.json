{
  "source": {
    "vehicles": [
      {
        "vin": 1,
        "claims": [
          {
            "id": "c1"
          }
        ],
        "anotherArr": [
          {
            "id":"another1"
          }
        ]
      },
      {
        "vin": 2,
        "claims": [
          {
            "id": "c2"
          },
          {
            "id": "c3"
          }
        ],
        "anotherArr": [
          {
            "id":"another2"
          },
          {
            "id":"another3"
          }
        ]
      },
      {
        "vin": 3,
        "claims": [
          {
            "id": "c4"
          },
          {
            "id": "c5"
          }
        ],
        "anotherArr": [
          {
            "id":"another4"
          }
        ]
      }
    ]
  },

  "schema": [
    {
      "push": {
        "vehsClaims": {
          "for": {
            "path":  "@vehicles.claims",
            "count": 2
          },
          "push": {
            "vin": "$elem[0].$parent.vin",
            "id": "$elem[0].id",
            "vin1": "$elem[1].$parent.vin",
            "id1": "$elem[1].id",
            "data": {
              "for": {
                "path": ["$elem[0].$parent.anotherArr", "$elem[1].$parent.anotherArr"]
              } ,
              "push": {
                "id": "$elem.id"
              }
            }
          }
        }
      }
    }
  ],

  "output": [
    {
      "vehsClaims": [
        {
          "vin": 1,
          "vin1": 2,

          "id": "c1",
          "id1": "c2",

          "data": [
            {
              "id": "another1"
            },
            {
              "id": "another2"
            },
            {
              "id": "another3"
            }
          ]
        },
        {
          "vin": 2,
          "vin1": 3,

          "id": "c3",
          "id1": "c4",

          "data": [
            {
              "id": "another2"
            },
            {
              "id": "another3"
            },
            {
              "id": "another4"
            }
          ]
        },
        {
          "vin": 3,
          "id": "c5",
          "data": [
            {
              "id": "another4"
            }
          ]
        }
      ]
    }
  ]
}